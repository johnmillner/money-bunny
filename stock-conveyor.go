package main

import (
	"github.com/johnmillner/robo-macd/internal"
	"github.com/johnmillner/robo-macd/internal/alpaca_wrapper"
	coordinatorLib "github.com/johnmillner/robo-macd/internal/coordinator"
	"github.com/johnmillner/robo-macd/internal/gatherers"
	"github.com/johnmillner/robo-macd/internal/managers"
	"github.com/johnmillner/robo-macd/internal/transformers"
	"github.com/johnmillner/robo-macd/internal/utils"
	"log"
	"time"
)

func asdf() {

	// setup coordinator and receive main's configurator
	coordinator, _ := coordinatorLib.InitCoordinator(make(chan utils.Message, 100))

	alpaca := alpaca_wrapper.Alpaca{}
	equityData := make(chan []gatherers.Equity, 1000)
	macdData := make(chan []transformers.TransformedData, 1000)
	managerData := make(chan transformers.TransformedData, 1000)

	//time.Sleep(time.Now().Round(time.Minute).Add(time.Minute+time.Second).Sub(time.Now()))
	//initialize the gatherer
	_ = gatherers.Gatherer{}.StartUp(coordinator.NewMessenger(gatherers.GathererConfig{
		EquityData: equityData,
		Alpaca:     alpaca,
		Symbols:    getAssets(),
		Period:     time.Minute,
		Limit:      1000,
	}))

	_ = transformers.Transformer{}.StartUp(coordinator.NewMessenger(transformers.Config{
		EquityData:      equityData,
		TransformedData: macdData,
		Fast:            12,
		Slow:            26,
		Signal:          9,
		Trend:           200,
		Smooth:          14,
		InTime:          14,
	}))

	_ = managers.Manager{}.StartUp(coordinator.NewMessenger(managers.Config{
		TransformedData: macdData,
		ManagerData:     managerData,
	}))

	_ = internal.Executor{}.StartUp(coordinator.NewMessenger(internal.Config{
		TransformedData: managerData,
		Alpaca:          alpaca,
		Risk:            0.01,
		RiskReward:      1.5,
	}))

	for manager := range managerData {
		log.Printf("manager data %v", manager)
	}
}

// vol > 50K, marketCap > 2B, volatility > 2.5%, exchange = NYSE, NASDAQ
func getAssets() []string {
	return []string{"GE",
		"F",
		"PLTR",
		"DKNG",
		"CSCO",
		"ITUB",
		"BABA",
		"XOM",
		"PBR",
		"NCLH",
		"MRO",
		"DIS",
		"DAL",
		"UAL",
		"FCX",
		"TSLA",
		"BSX",
		"NKLA",
		"CMCSA",
		"OXY",
		"VRT",
		"PTON",
		"VIPS",
		"UBER",
		"MGM",
		"GM",
		"HST",
		"VER",
		"JWN",
		"NLY",
		"MU",
		"LU",
		"COTY",
		"TME",
		"FTCH",
		"IRM",
		"PINS",
		"ZM",
		"SAN",
		"X",
		"KSS",
		"CVX",
		"RKT",
		"HPE",
		"TEVA",
		"FSLY",
		"AMAT",
		"OPK",
		"MS",
		"HAL",
		"TJX",
		"SLB",
		"TSM",
		"EPD",
		"MRVL",
		"LYFT",
		"TWTR",
		"PBR.A",
		"MPC",
		"LUV",
		"SPG",
		"ON",
		"SPCE",
		"MTG",
		"VICI",
		"MPLN",
		"PK",
		"WORK",
		"JCI",
		"RTX",
		"CVS",
		"JBLU",
		"MO",
		"HPQ",
		"FITB",
		"FOXA",
		"WBA",
		"AEO",
		"BBBY",
		"HBAN",
		"CGC",
		"AGNC",
		"NOV",
		"IGT",
		"TRIP",
		"FTI",
		"DDOG",
		"LTHM",
		"LUMN",
		"TCOM",
		"BB",
		"BYND",
		"ING",
		"LB",
		"AIG",
		"AA",
		"WDC",
		"SPR",
		"ZTO",
		"MET",
		"BE",
		"ETRN",
		"CNP",
		"TFC",
		"U",
		"COG",
		"PEAK",
		"KIM",
		"NIU",
		"TDOC",
		"PENN",
		"NYCB",
		"BRX",
		"CIG",
		"PBCT",
		"GSX",
		"FHN",
		"CNQ",
		"TAL",
		"FLEX",
		"WYNN",
		"CPRI",
		"EQT",
		"FUTU",
		"LYV",
		"DB",
		"GFI",
		"IPG",
		"DISH",
		"CNX",
		"TCO",
		"MLCO",
		"CNHI",
		"MDT",
		"AVTR",
		"OVV",
		"BSY",
		"IVZ",
		"CFG",
		"ETSY",
		"MBT",
		"NET",
		"HWM",
		"NRZ",
		"CHL",
		"CTVA",
		"CIT",
		"RIDE",
		"MT",
		"AG",
		"TPR",
		"UNVR",
		"DXC",
		"BHC",
		"FOX",
		"SHO",
		"OSTK",
		"MPW",
		"JNPR",
		"ONEM",
		"APPS",
		"SIX",
		"CRWD",
		"QRTEA",
		"BNTX",
		"TECK",
		"DADA",
		"EQC",
		"SE",
		"APLE",
		"TAP",
		"WELL",
		"ADT",
		"HFC",
		"MAR",
		"BBVA",
		"BAM",
		"CIM",
		"CF",
		"BCS",
		"VNO",
		"DKS",
		"CZR",
		"VST",
		"HLT",
		"WRK",
		"STX",
		"AM",
		"ROST",
		"STL",
		"APD",
		"GT",
		"CINF",
		"SBRA",
		"NTES",
		"LYB",
		"FSLR",
		"MA",
		"APTV",
		"AMH",
		"BLDP",
		"DHI",
		"TS",
		"PLNT",
		"AXTA",
		"COF",
		"XRAY",
		"DOYU",
		"XRX",
		"DD",
		"JKS",
		"ELAN",
		"PHM",
		"FAST",
		"GOCO",
		"STWD",
		"FVRR",
		"AKAM",
		"DT",
		"LXP",
		"UMC",
		"HTHT",
		"HALO",
		"EBC",
		"TRGP",
		"GBT",
		"CLR",
		"WES",
		"LKQ",
		"AU",
		"WAB",
		"NSC",
		"KNX",
		"STLD",
		"NUAN",
		"EQR",
		"HIG",
		"LBTYK",
		"NVTA",
		"HPP",
		"GPN",
		"TSN",
		"CCEP",
		"TWLO",
		"SLG",
		"SFM",
		"SFIX",
		"CHNG",
		"TEAM",
		"THC",
		"NYT",
		"AIV",
		"BXP",
		"URBN",
		"PRU",
		"VG",
		"OHI",
		"EWBC",
		"TOT",
		"UNIT",
		"VRTX",
		"FTV",
		"HES",
		"VLY",
		"FCAU",
		"PSTG",
		"NTNX",
		"VNET",
		"SBSW",
		"PANW",
		"ZI",
		"TPH",
		"LNC",
		"STNE",
		"TENB",
		"HXL",
		"ADSK",
		"KAR",
		"NVST",
		"FOLD",
		"DELL",
		"DLR",
		"YETI",
		"TEL",
		"AYX",
		"ZION",
		"AMT",
		"BVN",
		"EIX",
		"ACGL",
		"SLQT",
		"NTAP",
		"DNLI",
		"CAH",
		"ULTA",
		"ENBL",
		"PXD",
		"RXT",
		"PBA",
		"BLDR",
		"HZNP",
		"STM",
		"ORCC",
		"FL",
		"TDC",
		"DEI",
		"TWOU",
		"MMP",
		"HTA",
		"SWKS",
		"MGP",
		"HCA",
		"PEB",
		"TGTX",
		"RNG",
		"OUT",
		"STT",
		"CTXS",
		"RPRX",
		"IFF",
		"LGF.A",
		"LEVI",
		"DNB",
		"LHX",
		"STOR",
		"NNN",
		"HIW",
		"SGMS",
		"UGP",
		"CHX",
		"VIV",
		"SHLX",
		"FLIR",
		"FNF",
		"KTOS",
		"SPB",
		"KC",
		"INTU",
		"EXPD",
		"QSR",
		"ASB",
		"GO",
		"ATH",
		"SEDG",
		"VEEV",
		"LEG",
		"TREX",
		"RDFN",
		"CAR",
		"EAF",
		"TDS",
		"TER",
		"CYRX",
		"ADNT",
		"LBTYA",
		"MTB",
		"TEF",
		"SBS",
		"SEAS",
		"AQN",
		"TTM",
		"TT",
		"HUN",
		"PWR",
		"TV",
		"APPN",
		"BPY",
		"IONS",
		"SRC",
		"CZZ",
		"ESI",
		"OLLI",
		"DAR",
		"DAN",
		"TOL",
		"OFC",
		"CSOD",
		"ATO",
		"EPR",
		"WSC",
		"REZI",
		"SYK",
		"MCHP",
		"DLB",
		"OKTA",
		"HAIN",
		"H",
		"NTRA",
		"REG",
		"STZ",
		"GDS",
		"NOVA",
		"EDU",
		"CFX",
		"FRT",
		"PAGS",
		"HR",
		"TRU",
		"VMC",
		"SUM",
		"WIX",
		"KLAC",
		"PACW",
		"BHF",
		"ISBC",
		"LPRO",
		"IPHI",
		"CORT",
		"SPOT",
		"NATI",
		"FLT",
		"EYE",
		"PNR",
		"BG",
		"ARNC",
		"ARNA",
		"HLF",
		"CMC",
		"AOS",
		"ARWR",
		"TXT",
		"ARRY",
		"CUZ",
		"ROOT",
		"APO",
		"PD",
		"MCK",
		"WLTW",
		"LULU",
		"NTRS",
		"AEL",
		"ADS",
		"PVH",
		"TIMB",
		"VIR",
		"TMHC",
		"ONB",
		"DVA",
		"KRC",
		"RHI",
		"JBGS",
		"VIRT",
		"IBKR",
		"EXAS",
		"ESTC",
		"RYAAY",
		"COUP",
		"TPX",
		"CC",
		"AMKR",
		"FSK",
		"EMN",
		"ELS",
		"IOVA",
		"ADPT",
		"RHP",
		"ALNY",
		"STAY",
		"SBNY",
		"CHKP",
		"EPRT",
		"SSL",
		"AJRD",
		"LAZ",
		"DCT",
		"ABC",
		"E",
		"TSEM",
		"DCP",
		"MTZ",
		"TAK",
		"SCI",
		"MCRB",
		"AEM",
		"SNN",
		"PRSP",
		"DOX",
		"MSP",
		"FHB",
		"LILAK",
		"WH",
		"NSTG",
		"FWONK",
		"SHOO",
		"MGA",
		"BXMT",
		"BRKR",
		"FBHS",
		"BHVN",
		"ALLO",
		"URI",
		"CVET",
		"TNDM",
		"NWG",
		"BKU",
		"ODFL",
		"TTD",
		"VEDL",
		"TRN",
		"LSXMK",
		"XPO",
		"BAND",
		"FULT",
		"RBA",
		"ANET",
		"REXR",
		"CRSP",
		"THS",
		"THO",
		"WB",
		"ITCI",
		"EBS",
		"ESNT",
		"HQY",
		"MNSO",
		"PDCO",
		"LSCC",
		"AGO",
		"FR",
		"CCMP",
		"FHI",
		"APG",
		"SRCL",
		"OSK",
		"WMS",
		"MAA",
		"SMAR",
		"SAIL",
		"EEFT",
		"HGV",
		"FSKR",
		"WRI",
		"AQUA",
		"IRBT",
		"NXST",
		"WCC",
		"AVT",
		"APLS",
		"FATE",
		"HUBS",
		"MHK",
		"AN",
		"SJI",
		"IMVT",
		"POR",
		"WAL",
		"ZLAB",
		"EHC",
		"SUI",
		"VSH",
		"ACHC",
		"MUFG",
		"MSI",
		"CRI",
		"AZEK",
		"JBHT",
		"VCYT",
		"TKR",
		"TXG",
		"SRPT",
		"REYN",
		"PZZA",
		"NVT",
		"CHU",
		"IART",
		"WAT",
		"NTCO",
		"AVNT",
		"MTN",
		"MMYT",
		"PTC",
		"MIME",
		"POST",
		"GPC",
		"MLM",
		"BSAC",
		"SFNC",
		"IT",
		"BURL",
		"ENTG",
		"QTWO",
		"LSXMA",
		"ESS",
		"ALGM",
		"UHS",
		"AVIR",
		"QTS",
		"TMX",
		"BEAM",
		"DY",
		"FORM",
		"AAXN",
		"BRKS",
		"CCOI",
		"FIZZ",
		"WYND",
		"SBAC",
		"STAA",
		"TCF",
		"AIMC",
		"AXS",
		"CTB",
		"GDOT",
		"AYI",
		"BSMX",
		"KRNT",
		"ATCO",
		"CDLX",
		"KMT",
		"GH",
		"FMX",
		"KTB",
		"SEM",
		"SPT",
		"NICE",
		"IPGP",
		"AMG",
		"VSAT",
		"WING",
		"CACC",
		"HII",
		"UBSI",
		"TRNO",
		"PODD",
		"IIPR",
		"SON",
		"PTVE",
		"MPWR",
		"YEXT",
		"SYNH",
		"TWST",
		"OSH",
		"DECK",
		"R",
		"HWC",
		"RXN",
		"ALV",
		"SEIC",
		"BEP",
		"FOUR",
		"RVMD",
		"SYNA",
		"CD",
		"BLI",
		"LSI",
		"PB",
		"TCBI",
		"NHI",
		"SF",
		"INSP",
		"WBS",
		"SAGE",
		"FTDR",
		"MTH",
		"CYBR",
		"LAMR",
		"VVNT",
		"PCTY",
		"STMP",
		"GTLS",
		"ARW",
		"EXP",
		"MRTX",
		"OPCH",
		"WTFC",
		"SNDR",
		"PNFP",
		"LECO",
		"AWI",
		"DCPH",
		"TTEK",
		"BXS",
		"GLOB",
		"RLAY",
		"UCBI",
		"IHG",
		"RETA",
		"BOH",
		"SWTX",
		"CHH",
		"TW",
		"FFIN",
		"AXSM",
		"STRA",
		"SATS",
		"BWXT",
		"PSN",
		"TRTN",
		"CFR",
		"OCFT",
		"CATY",
		"COHR",
		"RNR",
		"POWI",
		"WLK",
		"CCXI",
		"NFG",
		"ADC",
		"VAC",
		"BGNE",
		"GKOS",
		"PAYC",
		"MGLN",
		"SSB",
		"CHA",
		"AUB",
		"AVA",
		"AZPN",
		"FRPT",
		"FOXF",
		"PTCT",
		"RUSHA",
		"PCH",
		"NSP",
		"TRUP",
		"CMG",
		"CBD",
		"NFE",
		"BMCH",
		"GPI",
		"MTSI",
		"COLB",
		"IBP",
		"ALTR",
		"BLD",
		"AMN",
		"MEOH",
		"IRTC",
		"VC",
		"ABM",
		"MKTX",
		"FIBK",
		"CVLT",
		"SIGI",
		"HAE",
		"DQ",
		"VMI",
		"TPTX",
		"TCP",
		"FN",
		"TDY",
		"NGVT",
		"TX",
		"BSTZ",
		"TKC",
		"DOOR",
		"MMSI",
		"LAD",
		"HCM",
		"SC",
		"SMTC",
		"TFII",
		"VRNS",
		"PAG",
		"SXT",
		"ITGR",
		"NSIT",
		"CNS",
		"IBTX",
		"OM",
		"VRNT",
		"ARCE",
		"LILA",
		"WOR",
		"PRAH",
		"ASGN",
		"UFPI",
		"SAIC",
		"RBC",
		"MANU",
		"STEP",
		"WTS",
		"AFYA",
		"SLAB",
		"LII",
		"NWE",
		"CBRL",
		"KRTX",
		"ITRI",
		"CMD",
		"VERX",
		"EIDX",
		"PRLB",
		"SSTK",
		"AEIS",
		"WSO",
		"MANH",
		"TR",
		"RS",
		"CMP",
		"CW",
		"SITE",
		"CBT",
		"ATHM",
		"WPP",
		"TFX",
		"LFUS",
		"HLNE",
		"KYMR",
		"ALGT",
		"EGP",
		"THG",
		"BNR",
		"MTD",
		"MANT",
		"MKSI",
		"GATX",
		"CENTA",
		"JBT",
		"KOF",
		"LOPE",
		"PRLD",
		"MTLS",
		"DSGX",
		"DORM",
		"AIT",
		"ADCT",
		"CACI",
		"SFBS",
		"PAC",
		"MTX",
		"MORN",
		"FWONA",
		"INDB",
		"ERIE",
		"KEP",
		"FELE",
		"ABG",
		"GTES",
		"UI",
		"PSMT",
		"NOVT",
		"WNS",
		"FCNCA",
		"SAM",
		"TTEC",
		"LEGN",
		"KNSL",
		"IFS",
		"TREE",
		"ESLT",
		"LCII",
		"ESE",
		"SCL",
		"TIGO",
	}
}
